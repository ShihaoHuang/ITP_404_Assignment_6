{"ast":null,"code":"import _slicedToArray from\"/Users/natehuang/Desktop/itp404/hw/ITP_404_Assignment_6/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{fetchFollowers,addFollower,unFollow}from\"./Api.js\";export default function Page(_ref){var selectMember=_ref.selectMember,selectRepo=_ref.selectRepo;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),followers=_useState4[0],setFollowers=_useState4[1];function onFollow(elements){var newId=elements.id;var newElement={id:newId,name:elements.login};var found=followers.find(function(element){return element.id===Number(newId);});if(found){var newFollowers=followers.filter(function(element){return element.id!==Number(newId);});unFollow(newId);setFollowers(newFollowers);}else{var _newFollowers=followers.concat(newElement);addFollower(newElement);setFollowers(_newFollowers);}}function fetchAPI(){return fetch(\"https://api.github.com/orgs/emberjs/members\",{headers:{Authorization:'token 31830d17e83cee43166324aaa35c93d6444e083a',Accept:\"application/json\"}});}useEffect(function(){getFollowers().then(function(){renderPage();});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);function getFollowers(){return fetchFollowers().then(function(response){setFollowers(response);});}function displayFollow(id){var found=followers.find(function(element){return element.id===Number(id);});if(found){return/*#__PURE__*/React.createElement(React.Fragment,null,\"Unfollow\");}return/*#__PURE__*/React.createElement(React.Fragment,null,\"Follow\");}function renderPage(){fetchAPI().then(function(response){return response.json();}).then(function(response){setPage(response);//   console.log(response)\n});}function mapElements(data,handleEach){// console.log(data)\nreturn data.map(function(element){return handleEach(element);});}function formatElement(element){return/*#__PURE__*/React.createElement(\"li\",{key:element.id,className:\"list-group-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row ml-4 mb-4\"},/*#__PURE__*/React.createElement(\"img\",{className:\" col-2 p-3 rounded-circle pointer\",src:element.avatar_url,onClick:function onClick(){return selectMember(element.login);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"m-3 pointer\",onClick:function onClick(){return selectMember(element.login);}},element.login),/*#__PURE__*/React.createElement(\"div\",{className:\" p-3\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-info\",onClick:function onClick(){return selectRepo(element.repos_url);}},\"Repository\")),/*#__PURE__*/React.createElement(\"div\",{className:\" p-3\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-light\",onClick:function onClick(){return onFollow(element);}},displayFollow(element.id))))));}return/*#__PURE__*/React.createElement(\"div\",null,mapElements(page,formatElement));}","map":{"version":3,"sources":["/Users/natehuang/Desktop/itp404/hw/ITP_404_Assignment_6/src/Page.js"],"names":["React","useState","useEffect","fetchFollowers","addFollower","unFollow","Page","selectMember","selectRepo","page","setPage","followers","setFollowers","onFollow","elements","newId","id","newElement","name","login","found","find","element","Number","newFollowers","filter","concat","fetchAPI","fetch","headers","Authorization","Accept","getFollowers","then","renderPage","response","displayFollow","json","mapElements","data","handleEach","map","formatElement","avatar_url","repos_url"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {fetchFollowers, addFollower, unFollow} from \"./Api.js\"\nexport default function Page({selectMember, selectRepo}){\n    const [page, setPage] = useState([]);\n    const [followers, setFollowers] = useState([]);\n\n\n    function onFollow(elements){\n        const newId = elements.id;\n        const newElement = {\n            id : newId,\n            name : elements.login,\n        };\n        const found = followers.find(element=>{\n            return element.id === Number(newId);\n        })\n        if (found){\n            const newFollowers = followers.filter(element=>{\n                return element.id !== Number(newId);\n            })\n            unFollow(newId);\n            setFollowers(newFollowers);\n        }else{\n            const newFollowers = followers.concat(newElement);\n            addFollower(newElement);\n            setFollowers(newFollowers);\n        }\n    }\n    function fetchAPI(){\n        return fetch(`https://api.github.com/orgs/emberjs/members`, {\n          headers: {\n            Authorization: 'token 31830d17e83cee43166324aaa35c93d6444e083a',\n            Accept: \"application/json\",\n          },\n        });\n      }\n    \n      useEffect(()=>{\n        getFollowers().then(()=>{\n            renderPage();\n            }\n        )\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, [])\n\n      function getFollowers(){\n          return fetchFollowers().then(response=>{\n              setFollowers(response);\n          })\n      }\n\n      function displayFollow(id){\n          const found = followers.find(element=>{\n              return element.id === Number(id);\n          })\n          if (found){\n              return (<>\n                  Unfollow\n              </>)\n          }\n          return <>Follow</>\n      }\n\n      function renderPage(){\n        fetchAPI().then(response=>{\n          return response.json();\n        }).then(response=>{\n          setPage(response);\n        //   console.log(response)\n        })\n      }\n\n      function mapElements(data, handleEach){\n        // console.log(data)\n        return data.map(element=>{\n          return handleEach(element);\n        })\n      }\n    \n      function formatElement(element){\n        return (\n \n            <li key={element.id} className=\"list-group-item\">\n                <div className=\"row ml-4 mb-4\">\n                    <img className = \" col-2 p-3 rounded-circle pointer\" src={element.avatar_url} onClick={()=>selectMember(element.login)}></img>\n                    <div className =\"\">\n                        <h4 className = \"m-3 pointer\" onClick={()=>selectMember(element.login)}>{element.login}</h4>\n                        <div className = \" p-3\">\n                            <button className =\"btn btn-info\" onClick={()=>selectRepo(element.repos_url)}>Repository</button>\n                        </div>        \n                        <div className = \" p-3\">\n                            <button className = \"btn btn-light\" onClick={()=>onFollow(element)}>{displayFollow(element.id)}</button>\n                        </div>      \n                    </div>\n                \n                </div>\n            </li>\n            \n                  \n\n        )\n      }\n\n      return (<div>\n        {mapElements(page, formatElement)}\n      </div>)\n\n}"]},"metadata":{},"sourceType":"module"}